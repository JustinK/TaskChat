function setScreen(n){n?($("#divChat").show(),$("#divLogin").hide(),$("#divChat").trigger("click")):($("#divChat").hide(),$("#divLogin").show())}function registerEvents(n){$("#btnStartChat").click(function(){var t=$("#txtNickName").val();t.length>0?(factory.refreshCards(),n.server.connect(t)):alert("Please enter name")});$("#btnSendMsg").click(function(){var t=$("#txtMessage").val(),i;t.length>0&&(i=$("#hdUserName").val(),n.server.sendMessageToAll(i,t),$("#txtMessage").val(""))});$("#txtNickName").keypress(function(n){n.which===13&&$("#btnStartChat").click()});$("#txtMessage").keypress(function(n){n.which===13&&$("#btnSendMsg").click()})}function registerClientMethods(n){n.client.onConnected=function(t,r,u,f){for(setScreen(!0),$("#hdId").val(t),$("#hdUserName").val(r),$("#spanUser").html(r),i=0;i<u.length;i++)AddUser(n,u[i].ConnectionId,u[i].UserName);for(i=0;i<f.length;i++)AddMessage(f[i].UserName,f[i].Message)};n.client.onNewUserConnected=function(t,i){AddUser(n,t,i)};n.client.onUserDisconnected=function(n,t){var r,i;$("#"+n).remove();r="private_"+n;$("#"+r).remove();i=$('<div class="alert alert-warning">"'+t+'" logged off.<\/div>');$(i).hide();$("#divusers").prepend(i);$(i).fadeIn(200).delay(2e3).fadeOut(200)};n.client.messageReceived=function(n,t){AddMessage(n,t)}}function AddUser(n,t,i){var r=$('<div id="'+t+'" class="loginUser">'+i+"<\/div>");$("#divusers").append(r)}function AddMessage(n,t){$("#divChatWindow").append('<div class="message"><span class="userName">'+n+"<\/span>: "+t+"<\/div>");var i=$("#divChatWindow")[0].scrollHeight;$("#divChatWindow").scrollTop(i)}$(function(){setScreen(!1);var n=$.connection.chatHub;registerClientMethods(n);$.connection.hub.start().done(function(){registerEvents(n)})});$(function(){var n=$.connection.notificationHub;n.client.receiveNotification=function(n){$("#droppable").html(n);utilities.updateDisplay()};$("#droppable").on("change",function(){n.server.sendNotifications($("#droppable").html())});$("#divChat").on("click",function(){n.server.connect()});$.connection.hub.start()});
//# sourceMappingURL=chat.min.js.map